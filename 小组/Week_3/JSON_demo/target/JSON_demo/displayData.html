<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>展示数据</title>

    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js" type="text/javascript" charset="UTF-8"></script>
    <script type="text/javascript">
        $(function () {
            $("#fund").click(function ()
            {
                var tbody = document.querySelector('tbody');
                tbody.innerHTML = '';
                $.ajax({
                    url: "EmpServlet",
                    type: "GET",
                    async: true,
                    data_type: 'json',
                    success: function (res) {
                        var str = "";
                        var data = JSON.parse(res);
                        for (i in data) {
                            str += "<tr align=\"center\">" +
                                "<td>" + data[i].empno + "</td>" +
                                "<td>" + data[i].ename + "</td>" +
                                "<td>" + data[i].job + "</td>" +
                                "<td>" + data[i].mgr + "</td>" +
                                "<td>" + data[i].hiredate + "</td>" +
                                "<td>" + data[i].sal + "</td>" +
                                "<td>" + data[i].comm + "</td>" +
                                "<td>" + data[i].deptno + "</td>" +
                                "</tr>";

                        }
                        $("#tbody-result").html(str);


                    },
                    error: function (err) {
                        alert("未查询到数据");
                    }
                });
            })


            $.ajax({
                url: "EmpServlet",
                type: "GET",
                async: true,
                data_type: 'json',
                success: function (res) {
                    var str = "";
                    var data = JSON.parse(res);
                    for (i in data) {
                        str += "<tr align=\"center\">" +
                            "<td>" + data[i].empno + "</td>" +
                            "<td>" + data[i].ename + "</td>" +
                            "<td>" + data[i].job + "</td>" +
                            "<td>" + data[i].mgr + "</td>" +
                            "<td>" + data[i].hiredate + "</td>" +
                            "<td>" + data[i].sal + "</td>" +
                            "<td>" + data[i].comm + "</td>" +
                            "<td>" + data[i].deptno + "</td>" +
                            "</tr>";

                    }
                    $("#tbody-result").html(str);


                },
                error: function (err) {
                    alert("未查询到数据");
                }
            });
            $("#insert").click(function ()
            {

                var url="insertData.html";

                location.assign(url);
            })

            $("#delete").click(function ()
            {

                var url="deleteData.html";

                location.assign(url);
            })
        });

    </script>
</head>
<body>
<center><h1>以下为通过数据库所获取的数据并且通过JSON的方式传输</h1></center>
    <center><input type="button" id="fund" value="刷新数据"></center>
    <table align="center" border='1px' width="60%" height="150px">
        <thead>
        <center><input type="button" id="insert" value="插入数据"></center>
        <center><input type="button" id="delete" value="删除数据"></center>
        <tr align="center">
            <th>EMPNO</th>
            <th>ENAME</th>
            <th>JOB</th>
            <th>MGR</th>
            <th>HIREDATE</th>
            <th>SAL</th>
            <th>COMM</th>
            <th>DEPTNO</th>
        </tr>
        </thead>
        <tbody id="tbody-result">

        </tbody>

    </table>
</body>
</html>